<!DOCTYPE html>
<html>
<head>
    <title>Mines Math Heat Map</title>
    <style>
        body { background: #0f212e; color: white; font-family: sans-serif; text-align: center; }
        .grid { display: grid; grid-template-columns: repeat(5, 60px); gap: 10px; justify-content: center; margin-top: 20px; }
        .tile { width: 60px; height: 60px; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 10px; cursor: pointer; transition: 0.3s; border: 1px solid #2f4553; }
        .controls { margin-bottom: 20px; background: #1a2c38; padding: 20px; display: inline-block; border-radius: 8px; }
        input { background: #071621; border: 1px solid #2f4553; color: white; padding: 5px; width: 50px; }
    </style>
</head>
<body>

    <h2>Mathematical Risk Heat Map</h2>
    <div class="controls">
        Mines: <input type="number" id="mineCount" value="3" min="1" max="24" onchange="resetBoard()">
        <button onclick="resetBoard()">Reset Board</button>
    </div>

    <div class="grid" id="board"></div>
    <p id="status">Click tiles to calculate risk density.</p>

    <script>
        let picked = 0;
        
        function resetBoard() {
            picked = 0;
            const board = document.getElementById('board');
            board.innerHTML = '';
            for (let i = 0; i < 25; i++) {
                let btn = document.createElement('div');
                btn.className = 'tile';
                btn.id = 'tile-' + i;
                btn.style.backgroundColor = '#2f4553';
                btn.onclick = () => markTile(i);
                board.appendChild(btn);
            }
            updateHeatMap();
        }

        function markTile(id) {
            let el = document.getElementById('tile-' + id);
            if (el.innerHTML === "SAFE") return;
            el.innerHTML = "SAFE";
            el.style.backgroundColor = "#00e701";
            el.style.color = "#000";
            picked++;
            updateHeatMap();
        }

        function updateHeatMap() {
            const mines = parseInt(document.getElementById('mineCount').value);
            const remainingTiles = 25 - picked;
            const hitChance = (mines / remainingTiles) * 100;
            
            // Calculate color based on risk (0% green -> 100% red)
            const red = Math.min(255, (hitChance * 5.1)); 
            const green = Math.max(0, 255 - (hitChance * 5.1));
            const color = `rgb(${red}, ${green}, 50)`;

            for (let i = 0; i < 25; i++) {
                let el = document.getElementById('tile-' + i);
                if (el.innerHTML !== "SAFE") {
                    el.style.backgroundColor = color;
                    el.innerHTML = hitChance.toFixed(1) + "%";
                }
            }
            document.getElementById('status').innerHTML = `Tiles picked: ${picked} | Board Risk: ${hitChance.toFixed(2)}%`;
        }

        resetBoard();
    </script>
</body>
</html>
